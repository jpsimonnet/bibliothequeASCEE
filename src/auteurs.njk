---
layout: layouts/base.njk
title: Tous les auteurs
permalink: /auteurs/
---

<div class="auteurs-container">
  
  <header class="auteurs-header">
    <h1>Tous les auteurs</h1>
    <p>{{ livres | map("auteur") | unique | length }} auteurs dans notre collection</p>
  </header>

  <div class="search-bar">
    <input 
      type="search" 
      id="auteurSearch" 
      placeholder="Rechercher un auteur..."
      autocomplete="off"
    >
  </div>

  <div class="auteurs-grid" id="auteursGrid">
    {% set auteurs = livres | map("auteur") | unique | sort %}
    {% for auteur in auteurs %}
      {% if auteur %}
        {% set livresAuteur = livres | selectattr("auteur", "equalto", auteur) %}
        <article class="auteur-card" data-auteur="{{ auteur | lower }}">
          <a href="/auteur/{{ auteur | slugify }}/">
            <h3>{{ auteur }}</h3>
            <p class="livre-count">{{ livresAuteur | length }} livre{% if livresAuteur | length > 1 %}s{% endif %}</p>
            <div class="auteur-preview">
              {% for livre in livresAuteur | limit(3) %}
                <img src="{{ livre.id | coverUrl }}" alt="{{ livre.nom }}" loading="lazy">
              {% endfor %}
            </div>
          </a>
        </article>
      {% endif %}
    {% endfor %}
  </div>

</div>

<style>
.auteurs-header {
  text-align: center;
  margin-bottom: 2rem;
}

.auteurs-header h1 {
  font-size: 2.5rem;
  color: #1f2937;
  margin-bottom: 0.5rem;
}

.auteurs-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1.5rem;
  margin-top: 2rem;
}

.auteur-card {
  background: white;
  border-radius: 8px;
  padding: 1.5rem;
  transition: transform 0.2s, box-shadow 0.2s;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.auteur-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.auteur-card h3 {
  font-size: 1.125rem;
  color: #1f2937;
  margin-bottom: 0.5rem;
}

.livre-count {
  color: #6b7280;
  font-size: 0.875rem;
  margin-bottom: 1rem;
}

.auteur-preview {
  display: flex;
  gap: 0.5rem;
  overflow: hidden;
}

.auteur-preview img {
  width: 60px;
  height: 90px;
  object-fit: cover;
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
</style>

<script>
const auteurSearch = document.getElementById('auteurSearch');
const auteursGrid = document.getElementById('auteursGrid');
const auteurCards = Array.from(document.querySelectorAll('.auteur-card'));

auteurSearch.addEventListener('input', () => {
  const searchTerm = auteurSearch.value.toLowerCase();
  
  auteurCards.forEach(card => {
    const auteur = card.dataset.auteur;
    const matches = auteur.includes(searchTerm);
    card.style.display = matches ? 'block' : 'none';
  });
});
</script>